agent_contract:
  name: "Educational marimo Notebook Generator"
  version: "1.0"
  description: >
    Parameter system for generating structured educational notebooks in marimo following strict cell-based output protocol. Output must contain only MARKDOWN and CODE cells as defined in the Agent Instruction Contract.

  output_protocol:
    strict_cell_protocol: true
    allowed_delimiters:
    - "=== MARKDOWN CELL ==="
    - "=== CODE CELL ==="
    no_text_outside_cells: true
    no_full_py_file: true
    no_simulated_outputs: true
    deterministic_setup_required: true

  defaults:
    language: "es" # Default output language (affects entire notebook)
    tone: "academic_accessible"
    verbosity: "medium"
    include_section_headers: true
    glossary: true

  schema:

    topic:
      title: ""
      scope: ""

    audience:
      level: "beginner" # absolute_beginner | beginner | intermediate | advanced
      prerequisites: []

    learning_objectives: []

    estimated_cells:
      min: 18
      max: 30

    math_depth: "none" # none | light | moderate | heavy
    code_depth: "toy" # toy | practical | productionish

    interactivity:
      mode: "light" # none | light | standard | heavy
      allowed_widgets: []
      min_widgets_total: 0
      max_widgets_total: 3
      must_include: []

    visualization:
      required: false
      libraries_allowed: []
      max_plots: 0

    data:
      source: "none" # none | synthetic | inline_small | public
      constraints: []

    exercises:
      frequency: "per_section" # end_only | per_section | mixed
      count_target: 6
      include_hints: true
      include_solutions: false

    assessment:
      include_quiz_cells: false
      include_self_checks: false
      allowed_asserts: false

    style:
      language: "es" # es | en (affects entire notebook output)
      tone: "academic_accessible"
      verbosity: "medium" # low | medium | high

    constraints: []

    section_plan:
      required: true
      sections: []
      # Example:
      # - name: "Introduction"
      #   approx_cells: 3
      # - name: "Core Concept"
      #   approx_cells: 6

    glossary:
      enabled: true
      min_terms: 5
      max_terms: 15

    deliverable:
      format: "cells_only"
      include_section_headers: true

  presets:

    intro_programming_beginner:
      audience:
        level: "absolute_beginner"
        prerequisites: [ "None" ]
      math_depth: "none"
      code_depth: "toy"
      interactivity:
        mode: "light"
        allowed_widgets: [ "dropdown", "slider" ]
        min_widgets_total: 1
        max_widgets_total: 3
      exercises:
        frequency: "per_section"
        count_target: 8
        include_hints: true
        include_solutions: false
      assessment:
        include_self_checks: true
        allowed_asserts: true
      estimated_cells:
        min: 18
        max: 28
      glossary:
        enabled: true
        min_terms: 8
        max_terms: 15

    data_science_intermediate:
      audience:
        level: "intermediate"
        prerequisites:
        - "Basic Python"
        - "Fundamental statistics"
      math_depth: "light"
      code_depth: "practical"
      interactivity:
        mode: "standard"
        allowed_widgets: [ "slider", "dropdown", "checkbox" ]
        min_widgets_total: 2
        max_widgets_total: 5
      visualization:
        required: true
        libraries_allowed: [ "matplotlib" ]
        max_plots: 4
      exercises:
        frequency: "mixed"
        count_target: 6
        include_hints: true
        include_solutions: false
      assessment:
        include_self_checks: true
        allowed_asserts: true
      estimated_cells:
        min: 24
        max: 40
      glossary:
        enabled: true
        min_terms: 6
        max_terms: 12

    methods_advanced:
      audience:
        level: "advanced"
        prerequisites:
        - "Advanced Python"
        - "Linear algebra"
        - "Probability theory"
      math_depth: "heavy"
      code_depth: "productionish"
      interactivity:
        mode: "light"
        allowed_widgets: [ "slider" ]
        min_widgets_total: 0
        max_widgets_total: 2
      visualization:
        required: true
        libraries_allowed: [ "matplotlib" ]
        max_plots: 6
      exercises:
        frequency: "end_only"
        count_target: 4
        include_hints: false
        include_solutions: false
      assessment:
        include_self_checks: true
        allowed_asserts: true
      estimated_cells:
        min: 28
        max: 55
      glossary:
        enabled: true
        min_terms: 5
        max_terms: 10

  usage_notes: >
    To generate a notebook:
      1. Select a preset.
      2. Override topic, learning_objectives, section_plan, and constraints.
      3. Ensure style.language is explicitly set if different from default.
      4. Render into the Instruction Template before sending to the agent.

    The language parameter affects:
      - All MARKDOWN content
      - Exercise wording
      - Glossary entries
      - Comments inside CODE cells (must match language)
      - Section titles

    If language is not specified, default is Spanish.
